<!-- TODO: change this to bower_components route, less confusing -->
<link rel="import" href="../../components/polymer/polymer.html">

<!--
Attached left, right, or none
	No greebles on attachment side
	Placement indicator comes out from attachment side w/ constant margin
	Placement indicators & audio indicators only used when attached to a side

Width configurable
Height constant

Audio indicator comes out from side opposide placement indicator
-->

<dom-module id="gdq-nameplate">
	<template>
		<style>
			:host {
				position: absolute;
				display: flex;
				height: 35px;
				background: url("img/center.png");
				font-size: 25px;
				text-transform: uppercase;
				-webkit-filter: drop-shadow(4px 4px 0 rgba(0,0,0,0.33));
			}

			:host:before {
				content: '';
				height: 100%;
				width: 10px;
				background: url("img/left.png");
			}

			:host:after {
				content: '';
				height: 100%;
				width: 10px;
				background: url("img/right.png");
			}

			#names {
				display: flex;
				align-items: center;
				justify-content: center;
				flex-grow: 1;
				white-space: nowrap;
				padding: 0 16px;
				width: var(--gdq-nameplate-width);
			}

			#timeClip {
				position: absolute;
				width: 150px;
				height: 100%;
				-webkit-clip-path: polygon(0 0, 0% 0%, calc(0% - 15px) 100%, 0% 100%);
				-webkit-mask: url("img/time-mask-right.png");
				transition: -webkit-clip-path 1700ms cubic-bezier(0.86, 0, 0.07, 1);
			}

			#timeShine {
				position: absolute;
				top: 0;
				left: 0;
				width: 0;
				height: 100%;
				transition: width 1700ms cubic-bezier(0.86, 0, 0.07, 1);
			}

			#timeShine:after {
				position: absolute;
				top: 0;
				right: 0;
				content: '';
				width: 37px;
				height: 100%;
				background: white;
				transform: skewX(-22deg);
			}

			#time {
				display: flex;
				width: 121px;
				height: 100%;
				background: url("img/time-center.png");
				visibility: hidden;
				position: relative;
			}

			#time:before {
				content: '';
				height: 100%;
				width: 1px;
				background: url("img/time-left.png");
			}

			#time:after {
				content: '';
				height: 100%;
				width: 1px;
				background: url("img/time-right.png");
			}

			#time span {
				font-weight: 700;
				flex-grow: 1;
				text-align: center;
				padding-right: 10px;
				line-height: 36px;
			}

			#medal {
				position: absolute;
				top: 5px;
				right: -8px;
			}

			/* attachment styles */
			:host[attach-left]:before {
				content: none;
			}

			:host[attach-right]:after {
				content: none;
			}

			:host[attach-left]:after {
				order: 2;
			}

			:host[attach-left] #names {
				order: 1;
			}

			:host[attach-left] #timeClip {
				order: 0;
				left: -150px;
				-webkit-mask: url("img/time-mask-left.png");
				-webkit-clip-path: polygon(100% 0, 100% 0%, 100% 100%, calc(100% + 15px) 100%);
			}

			:host[attach-left] #time {
				position: absolute;
				right: 0;
			}

			:host[attach-left] #time span {
				padding-right: 0;
				padding-left: 10px;
			}

			:host[attach-left] #timeShine {
				right: 0;
				left: auto;
			}

			:host[attach-left] #timeShine:after {
				transform: skewX(22deg);
				left: 0px;
				right: auto;
			}

			:host[attach-left] #medal {
				left: -8px;
				right: auto;
			}

			/* state styles */
			:host[stopped] #time,
			:host[finished] #time {
				visibility: visible;
			}

			:host[stopped] #time {
				background: url("img/time-center-stopped.png");
			}

			:host[stopped] #time:before {
				background: url("img/time-left-stopped.png");
			}

			:host[stopped] #time:after {
				background: url("img/time-right-stopped.png");
			}
		</style>

		<div id="names" class="shadow"></div>

		<div id="timeClip">
			<div id="time">
				<span class="shadow">[[time]]</span>
				<img id="medal" src="[[calcPlaceImage(place, stopped)]]">
			</div>
			<div id="timeShine"></div>
		</div>
	</template>

	<script src="gdq-nameplate.js"></script>
</dom-module>
